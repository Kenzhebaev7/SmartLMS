<?php

namespace Database\Seeders;

use App\Models\Section;
use App\Models\Lesson;
use App\Models\Quiz;
use App\Models\Question;
use Illuminate\Database\Seeder;

/**
 * Добавляет казахские переводы (title_kk, description_kk, content_kk, text_kk, options_kk)
 * для разделов, уроков и квизов. Обновляет существующие записи по совпадению title/text.
 */
class TranslationsKkSeeder extends Seeder
{
    public function run(): void
    {
        $this->sectionsKk();
        $this->lessonsKk();
        $this->quizzesAndQuestionsKk();
    }

    private function sectionsKk(): void
    {
        $map = [
            'Введение в информатику' => ['title_kk' => 'Информатикаға кіріспе', 'description_kk' => 'Информатика деген не, ақпарат, деректер. Компьютердің қазіргі әлемдегі рөлі.'],
            'Алгоритмы и основы логики' => ['title_kk' => 'Алгоритмдер және логика негіздері', 'description_kk' => 'Алгоритм ұғымы, алгоритм қасиеттері, жазу тәсілдері. Логикалық амалдар.'],
            'Основы программирования' => ['title_kk' => 'Бағдарламалау негіздері', 'description_kk' => 'Айнымалылар, деректер типтері, тармақталу мен циклдар. Алғашқы бағдарламалар.'],
            'Структуры данных' => ['title_kk' => 'Деректер құрылымдары', 'description_kk' => 'Массивтер, тізімдер. Деректер жинақтарымен жұмыс.'],
            'Базы данных и SQL' => ['title_kk' => 'Деректер қорлары және SQL', 'description_kk' => 'Реляциялық ДҚ, кестелер, SELECT, INSERT, UPDATE сұраулары.'],
            'Веб-разработка: основы' => ['title_kk' => 'Веб-әзірлеу: негіздер', 'description_kk' => 'HTML, CSS және веб-бет қалай құрылады. Браузердегі алғашқы бет.'],
            'ООП и практика' => ['title_kk' => 'ООП және тәжірибе', 'description_kk' => 'Объектіге бағдарлаған бағдарламалау: класстар, объектілер, инкапсуляция.'],
            'Основы Информатики' => ['title_kk' => 'Информатика негіздері', 'description_kk' => 'Кіріспе бөлімі: ақпарат, деректер, информатика бөлімдері.'],
            'Основы программирования на C++' => ['title_kk' => 'C++ бағдарламалау негіздері', 'description_kk' => 'C++ кіріспе. Әзірлеу ортасын орнату.'],
        ];

        foreach ($map as $titleRu => $row) {
            Section::where('title', $titleRu)->update($row);
        }
    }

    private function lessonsKk(): void
    {
        $updates = [
            ['title' => 'Что такое информатика', 'title_kk' => 'Информатика деген не', 'content_kk' => "Информатика — компьютерлер көмегімен ақпаратты жинау, сақтау, өңдеу және беру әдістері мен үдерістері туралы ғылым.\n\nНегізгі бағыттар: алгоритмдер, бағдарламалау, деректер қорлары, компьютерлік желілер, жасанды интеллект."],
            ['title' => 'Информация и данные', 'title_kk' => 'Ақпарат және деректер', 'content_kk' => "Ақпарат — қоршаған әлем объектілері мен құбылыстары туралы мәліметтер.\n\nДеректер — компьютерде сақтау мен өңдеуге қолайлы формальды түрдегі ақпарат. Өлшем бірліктері: бит, байт, килобайт, мегабайт."],
            ['title' => 'Понятие алгоритма', 'title_kk' => 'Алгоритм ұғымы', 'content_kk' => "Алгоритм — бастапқы деректерден нәтижеге әкелетін нақты әрекеттер тізбегі.\n\nҚасиеттер: дискреттілік, анықтылық, нәтижелілік, массалылық. Мысалдар: рецепт, нұсқаулық, бағдарлама."],
            ['title' => 'Логические операции', 'title_kk' => 'Логикалық амалдар', 'content_kk' => "Логика — бағдарламаларда шешім қабылдаудың негізі.\n\nАмалдар: ЖӘНЕ (AND), НЕМЕСЕ (OR), ЕМЕС (NOT). Шындық кестелері. Алгоритмдердегі шарттар: егер — онда — әйтпесе."],
            ['title' => 'Переменные и типы данных', 'title_kk' => 'Айнымалылар және деректер типтері', 'content_kk' => "Айнымалы — деректерді сақтау үшін атауланған жады ұяшығы.\n\nТиптер: бүтін сан (int), нақты (float), жол (string), логикалық (bool). Тағайындау және амалдар."],
            ['title' => 'Ветвления: if и else', 'title_kk' => 'Тармақталу: if және else', 'content_kk' => "Тармақталу — шартқа байланысты әрекетті таңдау.\n\nСинтаксис: if (шарт) { әрекеттер } else { басқа әрекеттер }. Ішкі шарттар. Салыстыру: ==, !=, <, >."],
            ['title' => 'Циклы: for и while', 'title_kk' => 'Циклдар: for және while', 'content_kk' => "Цикл — код блогын қайталау.\n\nfor циклі — қайталау саны белгілі болғанда. while циклі — шарт шын болғанша. Шексіз циклдардан аулақ болу маңызды."],
            ['title' => 'Массивы', 'title_kk' => 'Массивтер', 'content_kk' => "Массив — бір типті элементтердің реттелген жиыны.\n\nНөлден индекстеу. Массив ұзындығы. Циклде элементтерді айналу. Бір өлшемді және көп өлшемді массивтер."],
            ['title' => 'Строки и операции над ними', 'title_kk' => 'Жолдар және оларға амалдар', 'content_kk' => "Жол — таңбалар тізбегі.\n\nАмалдар: конкатенация, ұзындық, кесу, ішкі жолды іздеу. Көп тілде жолдар өзгермейді — жаңа жол жасалады."],
            ['title' => 'Что такое база данных', 'title_kk' => 'Деректер қоры деген не', 'content_kk' => "Деректер қоры (ДҚ) — ұйымдастырылған деректер қоймасы.\n\nРеляциялық ДҚ — кестелер мен олар арасындағы байланыстар түріндегі деректер. ДҚБЖ — басқару жүйесі (MySQL, PostgreSQL т.б.)."],
            ['title' => 'Запросы SELECT', 'title_kk' => 'SELECT сұраулары', 'content_kk' => "SQL — ДҚ-ға сұраулар тілі.\n\nSELECT бағандар FROM кесте WHERE шарт. ORDER BY сұрыптау, LIMIT шектеу. Шарттар бойынша таңдау."],
            ['title' => 'Что такое HTML', 'title_kk' => 'HTML деген не', 'content_kk' => "HTML (HyperText Markup Language) — веб-беттер жасау үшін белгілеу тілі.\n\nТегтер: тақырыптар (h1–h6), абзац (p), сілтемелер (a), суреттер (img). Құжат head және body бөлімдерінен тұрады."],
            ['title' => 'CSS: стили и оформление', 'title_kk' => 'CSS: стильдер және безендіру', 'content_kk' => "CSS сыртқы түрді анықтайды: түстер, қаріптер, шегіністер, тор.\n\nСелекторлар (элемент, класс, id). color, background, margin, padding қасиеттері. Стильдерді HTML-ге қосу."],
            ['title' => 'Классы и объекты', 'title_kk' => 'Класстар және объектілер', 'content_kk' => "Класс — объектілер жасау үшін үлгі. Объект — өрістері мен әдістері бар класс данасы.\n\nКонструктор объекті жасалғанда шақырылады. Мысал: name, email өрістері бар User классы."],
            ['title' => 'Инкапсуляция и модификаторы доступа', 'title_kk' => 'Инкапсуляция және қатынас модификаторлары', 'content_kk' => "Инкапсуляция — ішкі іске асыруды жасыру. Жария (public) және жеке (private) өрістер мен әдістер.\n\nДеректерге бақылаулы қатынас үшін getters/setters қасиеттері."],
        ];

        foreach ($updates as $row) {
            $title = $row['title'];
            unset($row['title']);
            Lesson::where('title', $title)->update($row);
        }
    }

    private function quizzesAndQuestionsKk(): void
    {
        $quizTitles = [
            'Квиз: Введение в информатику' => 'Квиз: Информатикаға кіріспе',
            'Квиз: Алгоритмы' => 'Квиз: Алгоритмдер',
            'Квиз: Основы программирования' => 'Квиз: Бағдарламалау негіздері',
            'Квиз: Структуры данных' => 'Квиз: Деректер құрылымдары',
            'Квиз: Базы данных' => 'Квиз: Деректер қорлары',
            'Квиз: Веб-разработка' => 'Квиз: Веб-әзірлеу',
            'Квиз: ООП' => 'Квиз: ООП',
        ];
        foreach ($quizTitles as $ru => $kk) {
            Quiz::where('title', $ru)->update(['title_kk' => $kk]);
        }

        $questionsKk = [
            'Информатика изучает:' => ['text_kk' => 'Информатика зерттейді:', 'options_kk' => ['A' => 'Тек бағдарламалауды', 'B' => 'Ақпаратты жинау, сақтау және өңдеу әдістерін', 'C' => 'Тек компьютер құрылғысын']],
            'Минимальная единица измерения информации:' => ['text_kk' => 'Ақпарат өлшемінің минималды бірлігі:', 'options_kk' => ['A' => 'Байт', 'B' => 'Бит', 'C' => 'Килобайт']],
            'Данные в компьютере хранятся в виде:' => ['text_kk' => 'Компьютерде деректер қандай түрде сақталады:', 'options_kk' => ['A' => 'Тек мәтін', 'B' => 'Екілік кодтар (биттер)', 'C' => 'Тек сандар']],
            'Алгоритм должен быть:' => ['text_kk' => 'Алгоритм болуы керек:', 'options_kk' => ['A' => 'Тек жылдам', 'B' => 'Дискретті, анық, нәтижелі', 'C' => 'Ағылшын тілінде жазылған']],
            'Логическая операция ИЛИ даёт истину, когда:' => ['text_kk' => 'НЕМЕСЕ логикалық амалы шындық береді, қашан:', 'options_kk' => ['A' => 'Екі шарт те жалған', 'B' => 'Кем дегенде бір шарт шын', 'C' => 'Екеуі де шын']],
            'Переменная хранит:' => ['text_kk' => 'Айнымалы сақтайды:', 'options_kk' => ['A' => 'Тек сандарды', 'B' => 'Деректерді (сандар, жолдар т.б.)', 'C' => 'Тек бір әріпті']],
            'Цикл for используют, когда:' => ['text_kk' => 'for циклі қашан қолданылады:', 'options_kk' => ['A' => 'Шарт әрқашан жалған', 'B' => 'Қайталау саны белгілі', 'C' => 'Тек бір итерация керек']],
            'Индексация элементов массива часто начинается с:' => ['text_kk' => 'Массив элементтерінің индекстеуі жиі басталады:', 'options_kk' => ['A' => '1', 'B' => '0', 'C' => '-1']],
            'Массив хранит элементы:' => ['text_kk' => 'Массив элементтерді сақтайды:', 'options_kk' => ['A' => 'Тек әртүрлі типтерді', 'B' => 'Әдетте бір типті, реттелген', 'C' => 'Тек сандарды']],
            'Реляционная БД хранит данные в виде:' => ['text_kk' => 'Реляциялық ДҚ деректерді сақтайды:', 'options_kk' => ['A' => 'Тек бір файлда', 'B' => 'Кестелер мен олар арасындағы байланыстар түрінде', 'C' => 'Тек бұлтта']],
            'Язык запросов к реляционным БД:' => ['text_kk' => 'Реляциялық ДҚ-ға сұраулар тілі:', 'options_kk' => ['A' => 'Python', 'B' => 'SQL', 'C' => 'HTML']],
            'HTML расшифровывается как:' => ['text_kk' => 'HTML деген не:', 'options_kk' => ['A' => 'HyperText Markup Language', 'B' => 'High Tech Model Language', 'C' => 'Home Tool Markup Language']],
            'Тег <p> задаёт:' => ['text_kk' => '<p> тегі анықтайды:', 'options_kk' => ['A' => 'Тақырып', 'B' => 'Абзац', 'C' => 'Сілтеме']],
            'CSS отвечает за:' => ['text_kk' => 'CSS жауап береді:', 'options_kk' => ['A' => 'Сервердегі логикаға', 'B' => 'Беттің сыртқы түрі мен стильдарына', 'C' => 'Тек қаріптерге']],
            'Объект — это:' => ['text_kk' => 'Объект — бұл:', 'options_kk' => ['A' => 'Тек функция', 'B' => 'Класс данасы', 'C' => 'Тек айнымалы']],
            'Инкапсуляция позволяет:' => ['text_kk' => 'Инкапсуляция мүмкіндік береді:', 'options_kk' => ['A' => 'Тек коды жылдамдатуға', 'B' => 'Іске асыру детальдарын жасыруға', 'C' => 'Классты жоюға']],
        ];

        foreach ($questionsKk as $textRu => $row) {
            Question::where('text', $textRu)->update($row);
        }
    }
}
